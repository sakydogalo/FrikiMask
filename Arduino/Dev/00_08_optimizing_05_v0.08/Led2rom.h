/*
  Led2rom.h - Library for flashing Morse code.
  Created by sakydogalo@gmail.com, december 2020.
  Released into the public domain.
*/
#ifndef Led2rom_h
#define Led2rom_h

#define ROW      8
#define NLEDS   64 
#define NPIN     8
#define BETWEEN 50
#define SAMPLES 128
#include <EEPROM.h>
#include <FastLED.h>

struct configuration {
  CRGB colour;
  int brightness;
  int mask;
  };

class Led2rom
{
  public:
    configuration _config; //Current configuration
    float vol = 0;
    Led2rom();
    void init();
    //
    void write_brightness(int i, int brightness);
    void write_colour(int i, CRGB colour);
    void write_mask(int i);
    //
    void reset_mask(int i);
    void read_mask(int i);
    void read_brightness(int i);
    void read_colour(int i);
    //
    void change_mask(int i);
    //
    void copy_mouth(byte mouth[ROW], CRGB color);
    //for matrix leds
    void talk();
    void smile(int i);
    void display_smile(int vol_leds);
    void off();
    void set_brightness(int brightness);
    //for serial
    void send_config();
    //for microphone
    void microphone(int pin);
    
  private:
    int _dir;
    
  	CRGB _leds[NLEDS] = {    //working leds
  		};
  
      byte _mask[5][8] = {     //Current mask
  		};
  	
      byte _mouths[5][5][8]={//Mouths factory
      {//BOCA1 ORIGINAL 
      {0x00,0x00,0x00,0xFF,0xFF,0x00,0x00,0x00},
      {0x00,0x00,0x18,0xE7,0xE7,0x18,0x00,0x00},
      {0x00,0x00,0x7E,0x81,0x81,0x7E,0x00,0x00},
      {0x00,0x3C,0x42,0x81,0x81,0x42,0x3C,0x00},
      {0x3C,0x42,0x81,0x81,0x81,0x81,0x42,0x3C},
      },//BOCA1
    {//BOCA2 DARTH WADER
      {0x00,0x18,0x3C,0x42,0x81,0x81,0x81,0x5A},
      {0x00,0x18,0x3C,0x42,0x81,0x81,0x99,0x5A},
      {0x00,0x18,0x3C,0x42,0x81,0x99,0xA5,0x5A},
      {0x00,0x18,0x3C,0x42,0x99,0xA5,0xC3,0x5A},
      {0x00,0x18,0x3C,0x5A,0xA5,0xDB,0xA5,0x5A}
      },//BOCA2
    {//BOCA3 BENDER
      {0x00,0x00,0x7E,0x81,0xBC,0x81,0x7E,0x0},
      {0x00,0x00,0x7E,0x81,0xFF,0x91,0x7E,0x0},
      {0x00,0x00,0x7E,0x81,0xFF,0x99,0x7E,0x0},
      {0x00,0x00,0x7E,0x99,0xFF,0x99,0x7E,0x0},
      {0x00,0x00,0x7E,0xA5,0xFF,0xA5,0x7E,0x0} 
      },//BOCA3
    {//BOCA4 PACMAN 1
      {0x3C,0x42,0xA5,0x81,0x81,0x99,0x42,0x3C},
      {0x3C,0x42,0xA5,0x81,0x81,0xBD,0x42,0x3C},
      {0x3C,0x42,0xA5,0x81,0x99,0xBD,0x42,0x3C},
      {0x3C,0x42,0xA5,0x81,0x99,0xBD,0x5A,0x3C},
      {0x3C,0x42,0xA5,0x81,0x99,0xA5,0x5A,0x3C}
      },//BOCA4
    {//BOCA5 PACMAN 2
      {0x3C,0x42,0xA5,0x81,0x81,0x81,0x5A,0x3C},
      {0x3C,0x42,0xA5,0x81,0x81,0x81,0x7E,0x3C},
      {0x3C,0x42,0xA5,0x81,0x81,0xBD,0x42,0x3C},
      {0x3C,0x42,0xA5,0x81,0xBD,0xC3,0x42,0x3C},
      {0x3C,0x42,0xA5,0xBD,0xC3,0x81,0x42,0x3C}
      }//BOCA5
      };
};//Led2rom
#endif
